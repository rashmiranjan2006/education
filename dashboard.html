<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; 
            height: 100vh; /* Set body to full viewport height */
            overflow: hidden; /* Prevent the main body from scrolling */
        }
        /* Custom scrollbar for chat */
        .chat-container::-webkit-scrollbar {
            width: 8px;
        }
        .chat-container::-webkit-scrollbar-thumb {
            background-color: #d1d5db; /* gray-400 */
            border-radius: 4px;
        }
        .chat-container::-webkit-scrollbar-track {
            background: transparent;
        }
        /* Custom styles for mobile menu transition */
        .sidebar-open {
            transform: translateX(0) !important;
        }
        .backdrop-visible {
            opacity: 0.5;
            display: block;
        }
    </style>
</head>
<body>

    <!-- Main Flex Container - Full screen height, no scroll -->
    <div class="flex h-screen"> 

        <!-- Mobile Backdrop Overlay (Hidden on SM and up) -->
        <div id="backdrop" class="fixed inset-0 bg-black opacity-0 z-30 hidden transition-opacity duration-300 sm:hidden" onclick="toggleSidebar()"></div>

        <!-- Sidebar Navigation -->
        <!-- Fixed full height. Hidden on mobile by default (-translate-x-full). Visible/fixed on sm and up (sm:translate-x-0). -->
        <aside id="sidebar" class="w-64 bg-white shadow-2xl flex flex-col justify-between 
             fixed h-full z-40 transition-transform duration-300 ease-in-out 
             -translate-x-full sm:translate-x-0">
            
            <!-- Profile Section -->
            <div class="p-6 border-b border-gray-100 flex-shrink-0">
                <div class="flex flex-col items-center">
                    <div class="w-16 h-16 bg-[#3264e0] text-white flex items-center justify-center rounded-full text-xl font-bold mb-3 flex-shrink-0">
                        R
                    </div>
                    <div class="text-center">
                        <div class="text-base font-semibold text-gray-800 truncate" title="Rashmi Ranjan Sahu">Rashmi Ranjan Sahu</div>
                        <div class="text-xs text-gray-500 truncate mb-3" title="raghvihvghjh@gmail.com">raghvihvghjh@gmail.com</div>
                        <button data-view="profile" class="nav-item px-3 py-1.5 w-full text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200">
                            <i class="fas fa-user-circle mr-2"></i><span>View Profile</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Links -->
            <nav class="flex-grow overflow-y-auto">
                <ul class="space-y-1 p-4">
                    <li data-view="teachers" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-chalkboard-teacher w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Teachers</span>
                    </li>
                    <li data-view="courses" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-book-open w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Courses</span>
                    </li>
                    <li data-view="whiteboard" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-paint-brush w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Whiteboard</span>
                    </li>
                    <li data-view="chat-bot" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-robot w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">AI Chat Bot</span>
                    </li>
                    <li data-view="attendance" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-calendar-alt w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Attendance</span>
                    </li>
                    <li data-view="results" class="nav-item active cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 rounded-lg transition-colors bg-[#ffeecc] text-[#1a2340] font-semibold">
                        <i class="fas fa-award w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Results</span>
                    </li>
                    <li data-view="assignment" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-file-alt w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Assignment</span>
                    </li>
                    <li data-view="calculator" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-calculator w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Calculator</span>
                    </li>
                    <li data-view="formula-charts" class="nav-item cursor-pointer flex items-center p-3 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-chart-bar w-5 h-5 flex-shrink-0"></i>
                        <span class="ml-3">Formula Charts</span>
                    </li>
                </ul>
            </nav>

            <!-- Logout Button -->
            <div class="p-6 border-t border-gray-100 flex-shrink-0">
                <button class="w-full flex items-center justify-start px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                    <i class="fas fa-sign-out-alt w-5 h-5 flex-shrink-0"></i>
                    <span class="ml-3">Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Wrapper (Margin adjustment only applies on SM and up) -->
        <div class="flex-1 ml-0 sm:ml-64 flex flex-col h-full transition-all duration-300">
            
            <!-- Header (FIXED relative to this column, flex-shrink-0) -->
            <header class="flex-shrink-0 bg-white shadow-sm pt-4 pb-4 border-b border-gray-200 flex items-center px-4 sm:px-8">
                <!-- Mobile Menu Toggle Button (Visible only on mobile) -->
                <button id="menu-toggle" class="sm:hidden p-2 mr-3 text-gray-600 hover:text-gray-800 rounded-lg">
                    <i class="fas fa-bars text-xl"></i>
                </button>

                <i class="fas fa-graduation-cap text-xl text-gray-500 mr-3"></i>
                <h2 class="text-xl font-medium text-gray-800">Student Dashboard</h2>
            </header>

            <!-- Scrollable Content Area (flex-1 overflow-y-auto ensures only this area scrolls) -->
            <main id="content-area" class="flex-1 overflow-y-auto p-4 sm:p-8 bg-[#f8fafc]">
                <!-- Content Views Container -->
                <div class="content-container">

                    <!-- Profile View -->
                    <div id="profile-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">My Profile</h1>
                        <p class="text-gray-500 text-lg mb-8">Manage your personal information</p>

                        <!-- Responsive: changed lg:flex-nowrap to standard flex wrap on small screens -->
                        <div class="flex flex-wrap lg:flex-nowrap gap-8">
                            <!-- Profile Picture Card (Full width on mobile/tablet, 1/3 on large screens) -->
                            <div class="w-full lg:w-1/3 bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <h2 class="text-xl font-semibold text-gray-800 mb-6">Profile Picture</h2>
                                <div class="flex flex-col items-center">
                                    <div class="w-32 h-32 bg-gray-200 text-gray-500 flex items-center justify-center rounded-full text-4xl font-bold mb-4">
                                        R
                                    </div>
                                    <button class="px-6 py-2 text-sm font-medium text-[#3264e0] border border-[#3264e0] hover:bg-[#3264e0] hover:text-white rounded-lg transition-colors">
                                        Change Picture
                                    </button>
                                </div>
                            </div>

                            <!-- Personal Information Card (Full width on all screens) -->
                            <div class="w-full lg:w-2/3 bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <h2 class="text-xl font-semibold text-gray-800 mb-6">Personal Information</h2>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label for="fullName" class="block text-sm font-medium text-gray-700">Full Name</label>
                                        <input type="text" id="fullName" value="Rashmi Ranjan Sahu" class="mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:border-[#3264e0] focus:ring focus:ring-[#3264e0]/20 transition-all">
                                    </div>
                                    <div>
                                        <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                        <input type="email" id="email" value="raghvihvghjh@gmail.com" class="mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 bg-gray-50" readonly>
                                    </div>
                                    <div>
                                        <label for="phoneNumber" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                        <input type="text" id="phoneNumber" value="" placeholder="Enter your phone number" class="mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:border-[#3264e0] focus:ring focus:ring-[#3264e0]/20 transition-all">
                                    </div>
                                    <div>
                                        <label for="userId" class="block text-sm font-medium text-gray-700">User ID</label>
                                        <input type="text" id="userId" value="584339ea-1e4c-47e2-95d4-9f4aeaedc98e" class="mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 bg-gray-50 text-sm" readonly>
                                    </div>
                                </div>

                                <div class="mt-6 flex gap-3">
                                    <button class="px-6 py-2 text-white bg-[#3264e0] hover:bg-[#254b9d] font-medium rounded-lg shadow-md transition-colors">
                                        Save Changes
                                    </button>
                                    <button class="px-6 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 font-medium rounded-lg transition-colors">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Attendance View -->
                    <div id="attendance-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Attendance</h1>
                        <p class="text-gray-500 text-lg mb-8">Track your class attendance</p>

                        <!-- Attendance Summary Cards (Responsive: 1 column on mobile, 3 on tablet/desktop) -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-base font-semibold text-gray-500 mb-2">Overall Attendance</div>
                                <div class="text-4xl font-extrabold text-[#3264e0] mb-3">85%</div>
                                <div class="h-2.5 bg-gray-200 rounded-full">
                                    <div class="h-2.5 bg-[#3264e0] rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-base font-semibold text-gray-500 mb-2">Classes Attended</div>
                                <div class="text-4xl font-extrabold text-green-600 mb-1">68</div>
                                <div class="text-sm text-gray-500">out of 80</div>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-base font-semibold text-gray-500 mb-2">Classes Missed</div>
                                <div class="text-4xl font-extrabold text-red-600 mb-1">8</div>
                                <div class="text-sm text-gray-500">out of 80</div>
                            </div>
                        </div>

                        <!-- Recent Attendance List -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">Recent Attendance</h2>
                            <ul class="space-y-4">
                                <!-- List Item -->
                                <li class="flex items-center justify-between border-b border-gray-100 pb-3 last:border-b-0 last:pb-0">
                                    <div class="flex items-center">
                                        <i class="fas fa-calendar-day w-5 h-5 text-gray-400 mr-3"></i>
                                        <div>
                                            <div class="font-medium text-gray-800">Mathematics</div>
                                            <div class="text-sm text-gray-500">2024-01-15</div>
                                        </div>
                                    </div>
                                    <span class="text-green-600 font-medium flex items-center">
                                        <i class="fas fa-check-circle mr-1 text-sm"></i> Present
                                    </span>
                                </li>
                                <li class="flex items-center justify-between border-b border-gray-100 pb-3 last:border-b-0 last:pb-0">
                                    <div class="flex items-center">
                                        <i class="fas fa-calendar-day w-5 h-5 text-gray-400 mr-3"></i>
                                        <div>
                                            <div class="font-medium text-gray-800">Physics</div>
                                            <div class="text-sm text-gray-500">2024-01-14</div>
                                        </div>
                                    </div>
                                    <span class="text-green-600 font-medium flex items-center">
                                        <i class="fas fa-check-circle mr-1 text-sm"></i> Present
                                    </span>
                                </li>
                                <li class="flex items-center justify-between border-b border-gray-100 pb-3 last:border-b-0 last:pb-0">
                                    <div class="flex items-center">
                                        <i class="fas fa-calendar-day w-5 h-5 text-gray-400 mr-3"></i>
                                        <div>
                                            <div class="font-medium text-gray-800">Chemistry</div>
                                            <div class="text-sm text-gray-500">2024-01-13</div>
                                        </div>
                                    </div>
                                    <span class="text-red-600 font-medium flex items-center">
                                        <i class="fas fa-times-circle mr-1 text-sm"></i> Absent
                                    </span>
                                </li>
                                <li class="flex items-center justify-between border-b border-gray-100 pb-3 last:border-b-0 last:pb-0">
                                    <div class="flex items-center">
                                        <i class="fas fa-calendar-day w-5 h-5 text-gray-400 mr-3"></i>
                                        <div>
                                            <div class="font-medium text-gray-800">Biology</div>
                                            <div class="text-sm text-gray-500">2024-01-12</div>
                                        </div>
                                    </div>
                                    <span class="text-green-600 font-medium flex items-center">
                                        <i class="fas fa-check-circle mr-1 text-sm"></i> Present
                                    </span>
                                </li>
                                <li class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i class="fas fa-calendar-day w-5 h-5 text-gray-400 mr-3"></i>
                                        <div>
                                            <div class="font-medium text-gray-800">Mathematics</div>
                                            <div class="text-sm text-gray-500">2024-01-11</div>
                                        </div>
                                    </div>
                                    <span class="text-green-600 font-medium flex items-center">
                                        <i class="fas fa-check-circle mr-1 text-sm"></i> Present
                                    </span>
                                </li>
                            </ul>
                            <div class="mt-8 p-4 bg-gray-50 rounded-lg border border-dashed border-gray-200 h-96 flex items-center justify-center text-gray-500">
                                Extra space for scroll test.
                            </div>
                        </div>
                    </div>

                    <!-- Results View (Set as initial view via JS) -->
                    <div id="results-view" class="content-view">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Academic Results</h1>
                        <p class="text-gray-500 text-lg mb-8">View your grades and performance</p>

                        <!-- Overall GPA Card -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 mb-8">
                            <div class="flex items-center text-xl font-semibold text-gray-800 mb-2">
                                <i class="fas fa-medal text-[#3264e0] mr-2"></i> Overall GPA
                            </div>
                            <div class="text-6xl font-extrabold text-gray-900 mb-1">3.8</div>
                            <p class="text-green-600 font-medium">Keep up the excellent work!</p>
                        </div>

                        <!-- Subject Grade Cards (Responsive: 1 column on mobile, 2 on tablet/desktop) -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Mathematics -->
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-xl font-semibold text-gray-800 mb-3">Mathematics</div>
                                <div class="flex justify-between items-end">
                                    <div>
                                        <div class="text-5xl font-extrabold text-green-600">A+</div>
                                        <div class="text-sm text-gray-500">95%</div>
                                    </div>
                                    <span class="text-green-500 font-medium text-sm flex items-center">
                                        <i class="fas fa-arrow-up text-xs mr-1"></i> Improving
                                    </span>
                                </div>
                            </div>
                            <!-- Physics -->
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-xl font-semibold text-gray-800 mb-3">Physics</div>
                                <div class="flex justify-between items-end">
                                    <div>
                                        <div class="text-5xl font-extrabold text-[#3264e0]">A</div>
                                        <div class="text-sm text-gray-500">88%</div>
                                    </div>
                                    <span class="text-green-500 font-medium text-sm flex items-center">
                                        <i class="fas fa-arrow-up text-xs mr-1"></i> Improving
                                    </span>
                                </div>
                            </div>
                            <!-- Chemistry -->
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-xl font-semibold text-gray-800 mb-3">Chemistry</div>
                                <div class="flex justify-between items-end">
                                    <div>
                                        <div class="text-5xl font-extrabold text-yellow-600">B+</div>
                                        <div class="text-sm text-gray-500">82%</div>
                                    </div>
                                    <span class="text-red-500 font-medium text-sm flex items-center">
                                        <i class="fas fa-exclamation-triangle text-xs mr-1"></i> Needs attention
                                    </span>
                                </div>
                            </div>
                            <!-- Biology -->
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <div class="text-xl font-semibold text-gray-800 mb-3">Biology</div>
                                <div class="flex justify-between items-end">
                                    <div>
                                        <div class="text-5xl font-extrabold text-green-600">A</div>
                                        <div class="text-sm text-gray-500">90%</div>
                                    </div>
                                    <span class="text-green-500 font-medium text-sm flex items-center">
                                        <i class="fas fa-arrow-up text-xs mr-1"></i> Improving
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Added extra content to ensure scroll test works for the Results view -->
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-100">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">Detailed Performance Report</h2>
                            <p class="text-gray-600 mb-4">This section contains a lot of additional data tables and charts to demonstrate the fixed header functionality during scrolling. Scroll down to see the header and sidebar remain locked in place.</p>
                            <div class="space-y-4">
                                <div class="h-48 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500">Chart Placeholder 1</div>
                                <div class="h-48 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500">Table Placeholder 2</div>
                                <div class="h-48 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500">Graph Placeholder 3</div>
                                <div class="h-48 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500">Data Set Placeholder 4 (Scroll Down More)</div>
                                <div class="h-48 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500">End of Content</div>
                            </div>
                        </div>

                    </div>

                    <!-- AI Chat Bot View -->
                    <div id="chat-bot-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">AI Study Assistant</h1>
                        <p class="text-gray-500 text-lg mb-8">Get instant help with your studies</p>
                        
                        <!-- Fixed chat height for better mobile viewing -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 h-[60vh] md:h-[600px] flex flex-col">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                                <i class="fas fa-robot text-[#3264e0] mr-2"></i> Chat with AI Assistant
                            </h2>
                            
                            <!-- Chat History Container -->
                            <div class="chat-container flex-1 overflow-y-auto space-y-4 pr-2">
                                <!-- AI Message -->
                                <div class="flex justify-start">
                                    <!-- Responsive: max-w-full on mobile, smaller on desktop -->
                                    <div class="max-w-full sm:max-w-md p-3 rounded-xl bg-gray-100 text-gray-800 shadow-sm text-sm">
                                        <i class="fas fa-robot text-base text-[#3264e0] mr-1"></i> Hello! I'm your AI study assistant. How can I help you today?
                                    </div>
                                </div>
                                <!-- User Message (Example) -->
                                <div class="flex justify-end">
                                    <div class="max-w-full sm:max-w-md p-3 rounded-xl bg-[#3264e0] text-white shadow-md text-sm">
                                        Can you explain the difference between speed and velocity?
                                    </div>
                                </div>
                            </div>

                            <!-- Input Area -->
                            <div class="mt-4 flex">
                                <input type="text" placeholder="Ask me anything about your studies..." class="flex-1 rounded-l-lg border border-gray-300 p-3 shadow-sm focus:border-[#3264e0] focus:ring focus:ring-[#3264e0]/20 transition-all">
                                <button class="bg-[#3264e0] text-white p-3 rounded-r-lg hover:bg-[#254b9d] transition-colors shadow-md">
                                    <i class="fas fa-paper-plane w-5 h-5"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Calculator View -->
                    <div id="calculator-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Scientific Calculator</h1>
                        <p class="text-gray-500 text-lg mb-8">Perform complex calculations</p>

                        <!-- Centered Calculator Card -->
                        <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 mx-auto max-w-lg">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                                <i class="fas fa-calculator text-[#3264e0] mr-2"></i> Calculator
                            </h2>

                            <div class="w-full">
                                <!-- Display -->
                                <div id="calc-display" class="bg-gray-100 p-4 mb-4 text-right text-3xl font-light rounded-lg shadow-inner border border-gray-200 h-16 overflow-x-auto whitespace-nowrap">0</div>

                                <!-- Main Grid -->
                                <div class="grid grid-cols-4 gap-3">
                                    <!-- Numeric/Basic Operators -->
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="7">7</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="8">8</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="9">9</button>
                                    <button class="calc-btn-op bg-[#3264e0] text-white hover:bg-[#254b9d] text-xl font-medium p-4 rounded-lg transition-colors shadow-md" data-value="/">÷</button>

                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="4">4</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="5">5</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="6">6</button>
                                    <button class="calc-btn-op bg-[#3264e0] text-white hover:bg-[#254b9d] text-xl font-medium p-4 rounded-lg transition-colors shadow-md" data-value="*">x</button>

                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="1">1</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="2">2</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value="3">3</button>
                                    <button class="calc-btn-op bg-[#3264e0] text-white hover:bg-[#254b9d] text-xl font-medium p-4 rounded-lg transition-colors shadow-md" data-value="-">-</button>

                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm col-span-1" data-value="0">0</button>
                                    <button class="calc-btn-num bg-gray-50 text-gray-900 hover:bg-gray-200 text-xl font-medium p-4 rounded-lg transition-colors shadow-sm" data-value=".">.</button>
                                    <button id="calc-equals" class="calc-btn-op bg-[#3264e0] text-white hover:bg-[#254b9d] text-xl font-medium p-4 rounded-lg transition-colors shadow-md" data-value="=">=</button>
                                    <button class="calc-btn-op bg-[#3264e0] text-white hover:bg-[#254b9d] text-xl font-medium p-4 rounded-lg transition-colors shadow-md" data-value="+">+</button>
                                </div>

                                <!-- Scientific Functions (2 columns on mobile, 3 on tablet/desktop) -->
                                <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 mt-4">
                                    <button class="calc-btn-sci bg-blue-500 text-white hover:bg-blue-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md" data-func="Math.sin(DEG_TO_RAD*)">sin</button>
                                    <button class="calc-btn-sci bg-blue-500 text-white hover:bg-blue-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md" data-func="Math.cos(DEG_TO_RAD*)">cos</button>
                                    <button class="calc-btn-sci bg-blue-500 text-white hover:bg-blue-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md" data-func="Math.tan(DEG_TO_RAD*)">tan</button>

                                    <button class="calc-btn-sci bg-blue-500 text-white hover:bg-blue-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md" data-func="Math.sqrt(*)">√</button>
                                    <button class="calc-btn-sci bg-blue-500 text-white hover:bg-blue-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md" data-func="Math.pow(*, 2)">x²</button>
                                    <button class="calc-btn-num bg-blue-500 text-white hover:bg-blue-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md" data-value="Math.PI">π</button>
                                </div>
                                
                                <!-- Clear Button -->
                                <div class="mt-4">
                                    <button id="calc-clear" class="w-full bg-red-500 text-white hover:bg-red-600 text-base font-medium p-3 rounded-lg transition-colors shadow-md">
                                        Clear (C)
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Placeholder views for other sections (Teachers, Courses, Whiteboard, Assignment, Formula Charts) -->
                    <div id="teachers-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Teachers</h1>
                        <p class="text-gray-500 text-lg">List of your assigned educators.</p>
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-100 h-96">
                            <p class="text-gray-700">Content for the Teachers section goes here.</p>
                        </div>
                    </div>
                    <div id="courses-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Courses</h1>
                        <p class="text-gray-500 text-lg">Your enrolled courses and study materials.</p>
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-100 h-96">
                            <p class="text-gray-700">Content for the Courses section goes here.</p>
                        </div>
                    </div>
                    <div id="whiteboard-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Whiteboard</h1>
                        <p class="text-gray-500 text-lg">A blank canvas for your notes and drawings.</p>
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-100 h-96">
                            <p class="text-gray-700">Content for the Whiteboard section goes here.</p>
                        </div>
                    </div>
                    <div id="assignment-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Assignments</h1>
                        <p class="text-gray-500 text-lg">Upcoming and submitted assignments.</p>
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-100 h-96">
                            <p class="text-gray-700">Content for the Assignments section goes here.</p>
                        </div>
                    </div>
                    <div id="formula-charts-view" class="content-view hidden">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Formula Charts</h1>
                        <p class="text-gray-500 text-lg">Quick reference charts for key formulas.</p>
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-100 h-96">
                            <p class="text-gray-700">Content for the Formula Charts section goes here.</p>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <script>
        const navItems = document.querySelectorAll('.nav-item');
        const contentViews = document.querySelectorAll('.content-view');
        const profileButton = document.querySelector('[data-view="profile"]');
        const display = document.getElementById('calc-display');
        const sidebar = document.getElementById('sidebar');
        const backdrop = document.getElementById('backdrop');
        const menuToggle = document.getElementById('menu-toggle');
        const DEG_TO_RAD = Math.PI / 180;
        let currentExpression = '0';
        let waitingForNewInput = true; // Flag to clear display on next number entry

        // --- Sidebar/Responsiveness Logic ---
        function toggleSidebar() {
            // Check if we are on a small screen (less than 640px)
            const isMobile = window.innerWidth < 640;

            if (isMobile) {
                // Toggle sidebar visibility
                sidebar.classList.toggle('-translate-x-full');
                sidebar.classList.toggle('sidebar-open');

                // Toggle backdrop visibility/opacity
                backdrop.classList.toggle('hidden');
                backdrop.classList.toggle('backdrop-visible');
            }
        }

        // Event listener for the menu toggle button
        menuToggle.addEventListener('click', toggleSidebar);

        // --- Navigation Logic ---

        function showView(viewId) {
            // Hide all views
            contentViews.forEach(view => view.classList.add('hidden'));

            // Show the requested view
            const targetView = document.getElementById(viewId);
            if (targetView) {
                targetView.classList.remove('hidden');
            }

            // Update active state in sidebar
            navItems.forEach(item => {
                item.classList.remove('active', 'bg-[#ffeecc]', 'text-[#1a2340]', 'font-semibold');
                item.classList.add('hover:bg-gray-100');
            });

            const activeItem = document.querySelector(`.nav-item[data-view="${viewId.replace('-view', '')}"]`);
            if (activeItem) {
                activeItem.classList.add('active', 'bg-[#ffeecc]', 'text-[#1a2340]', 'font-semibold');
                activeItem.classList.remove('hover:bg-gray-100');
            }

            // Handle "View Profile" button style
            if (viewId === 'profile-view') {
                profileButton.classList.add('bg-gray-100');
            } else {
                profileButton.classList.remove('bg-gray-100');
            }

            // Close the sidebar on mobile after navigating
            if (window.innerWidth < 640 && sidebar.classList.contains('sidebar-open')) {
                toggleSidebar();
            }
        }

        // Add event listeners to all navigation items
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const viewName = item.getAttribute('data-view');
                showView(`${viewName}-view`);
            });
        });
        
        // Add listener to the profile button
        profileButton.addEventListener('click', () => {
            showView('profile-view');
        });

        // Set initial view to 'Results' 
        showView('results-view');


        // --- Calculator Logic ---

        function updateDisplay() {
            // Ensure the display is always limited to a reasonable length
            let displayedValue = currentExpression.replace(/\*/g, 'x').replace(/\//g, '÷').replace(/Math\./g, '');
            // Simple truncation to prevent overflow
            if (displayedValue.length > 18) {
                displayedValue = displayedValue.substring(0, 15) + '...';
            }
            display.textContent = displayedValue || '0';
        }

        function appendValue(value) {
            if (currentExpression === '0' || waitingForNewInput) {
                // Special handling for decimal point when display is 0
                if (value === '.') {
                    currentExpression = '0.';
                } else if (value === '0') {
                    currentExpression = '0'; // Keep it 0
                } else {
                    currentExpression = value;
                }
                waitingForNewInput = false;
            } else {
                // Prevent multiple decimals in the same number
                if (value === '.' && currentExpression.split(/[\+\-\*\/]/).pop().includes('.')) {
                    return;
                }
                currentExpression += value;
            }
            updateDisplay();
        }

        function appendOperator(operator) {
            // Replace last operator if one exists
            const lastChar = currentExpression.slice(-1);
            if (['+', '-', '*', '/'].includes(lastChar)) {
                currentExpression = currentExpression.slice(0, -1) + operator;
            } else {
                currentExpression += operator;
            }
            waitingForNewInput = false;
            updateDisplay();
        }

        function calculateResult() {
            try {
                // Sanitize and evaluate the expression
                // Replace "x" and "÷" with "*" and "/" for evaluation
                let sanitizedExpression = currentExpression
                    .replace(/x/g, '*')
                    .replace(/÷/g, '/')
                    .replace(/\^/g, '**')
                    .replace(/Math\.sin\(([^)]*)\)/g, (match, p1) => `Math.sin(${p1.replace('DEG_TO_RAD', DEG_TO_RAD)})`)
                    .replace(/Math\.cos\(([^)]*)\)/g, (match, p1) => `Math.cos(${p1.replace('DEG_TO_RAD', DEG_TO_RAD)})`)
                    .replace(/Math\.tan\(([^)]*)\)/g, (match, p1) => `Math.tan(${p1.replace('DEG_TO_RAD', DEG_TO_RAD)})`);

                // Ensure it's safe to evaluate
                const safeExpression = sanitizedExpression.match(/^[0-9+\-*/().\sDegRadPI*Mthlgotrsqt^]+$/) ? sanitizedExpression : '';
                
                if (!safeExpression) {
                    throw new Error("Invalid expression");
                }

                const result = eval(safeExpression);
                
                if (isNaN(result) || !isFinite(result)) {
                    throw new Error("Invalid result");
                }

                // Format result to limit decimal places
                currentExpression = (Math.round(result * 10000) / 10000).toString();
                waitingForNewInput = true;
                updateDisplay();

            } catch (error) {
                display.textContent = 'Error';
                currentExpression = '0';
                waitingForNewInput = true;
                console.error("Calculator Error:", error.message);
            }
        }

        function applyScientificFunction(func) {
            // Apply function to the current display value (treating it as the last number entered/calculated)
            let lastValue = currentExpression.match(/([\d\.]+)(?!.*[\d\.]+)/)?.[0] || '0';
            let startIndex = currentExpression.lastIndexOf(lastValue);
            
            // If the expression is just a number or result, apply to the whole thing
            if (waitingForNewInput || startIndex === -1) {
                currentExpression = func.replace('*', lastValue);
            } else {
                // Replace the last number with the function applied to it
                currentExpression = currentExpression.substring(0, startIndex) + func.replace('*', lastValue);
            }

            // Special handling for PI as a number
            if (func === 'Math.PI') {
                currentExpression = currentExpression.replace('Math.PI', Math.PI.toString());
            } else if (func.includes('Math.')) {
                // If it's a function call, calculate immediately and set as the new expression
                try {
                    const tempResult = eval(currentExpression.replace('DEG_TO_RAD', DEG_TO_RAD));
                    currentExpression = (Math.round(tempResult * 10000) / 10000).toString();
                    waitingForNewInput = true;
                } catch (e) {
                    console.error("Sci Calc Error:", e);
                }
            }

            updateDisplay();
        }

        // Event listeners for calculator buttons
        document.querySelectorAll('.calc-btn-num').forEach(button => {
            button.addEventListener('click', () => appendValue(button.getAttribute('data-value')));
        });

        document.querySelectorAll('.calc-btn-op').forEach(button => {
            if (button.id !== 'calc-equals') {
                button.addEventListener('click', () => appendOperator(button.getAttribute('data-value')));
            }
        });

        document.querySelectorAll('.calc-btn-sci').forEach(button => {
            button.addEventListener('click', () => applyScientificFunction(button.getAttribute('data-func')));
        });

        document.getElementById('calc-equals').addEventListener('click', calculateResult);
        document.getElementById('calc-clear').addEventListener('click', () => {
            currentExpression = '0';
            waitingForNewInput = true;
            updateDisplay();
        });
        
        // Initial calculator display update
        updateDisplay();
    </script>

</body>
</html>